<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–æ–ª—Ñ –¢—É—Ä–Ω–∏—Ä Antalya 2025/2026</title>
    
    <!-- Firebase SDK v9 -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        
        window.firebaseApp = initializeApp;
        window.getDatabase = getDatabase;
        window.dbRef = ref;
        window.dbSet = set;
        window.dbGet = get;
        window.dbOnValue = onValue;
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #003366 0%, #004d99 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            flex: 0 0 auto;
            min-width: 120px;
            padding: 18px 12px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            background: none;
            font-size: 15px;
            white-space: nowrap;
        }

        .tab:hover {
            background: #e0e0e0;
        }

        .tab.active {
            background: white;
            color: #003366;
            border-bottom: 3px solid #003366;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #003366;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #003366;
        }

        .points-input-container {
            max-width: 400px;
            margin: 30px auto;
            text-align: center;
        }

        .points-input-large {
            width: 100%;
            padding: 20px;
            font-size: 48px;
            text-align: center;
            border: 3px solid #003366;
            border-radius: 10px;
            font-weight: bold;
            color: #003366;
        }

        .points-input-large:focus {
            outline: none;
            border-color: #004d99;
            box-shadow: 0 0 15px rgba(0, 51, 102, 0.3);
        }

        .btn {
            background: #003366;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .btn:hover {
            background: #004d99;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .leaderboard-table th {
            background: #003366;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .leaderboard-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        .leaderboard-table tr:hover {
            background: #f5f5f5;
        }

        .rank-1 {
            background: #FFD700 !important;
            font-weight: bold;
        }

        .rank-2 {
            background: #C0C0C0 !important;
            font-weight: bold;
        }

        .rank-3 {
            background: #CD7F32 !important;
            font-weight: bold;
        }

        .category-header {
            background: #003366;
            color: white;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
            font-size: 1.3em;
            font-weight: bold;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #003366;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box strong {
            color: #003366;
        }

        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            font-weight: bold;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .schedule-table th {
            background: #003366;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .schedule-table td {
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        .schedule-table tr:hover {
            background: #f0f8ff;
        }

        .day-badge {
            display: inline-block;
            padding: 5px 15px;
            background: #004d99;
            color: white;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .course-card {
            background: white;
            border: 2px solid #003366;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .course-card h3 {
            color: #003366;
            font-size: 1.8em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #003366;
        }

        .course-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .course-info-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 5px;
        }

        .course-info-item strong {
            color: #003366;
            display: block;
            margin-bottom: 5px;
        }

        .group-card {
            background: white;
            border: 2px solid #003366;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .group-card h3 {
            background: #003366;
            color: white;
            padding: 15px;
            margin: -20px -20px 20px -20px;
            border-radius: 8px 8px 0 0;
            font-size: 1.5em;
        }

        .group-members {
            list-style: none;
            padding: 0;
        }

        .group-members li {
            padding: 12px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .group-members li:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .player-name {
            font-weight: bold;
            color: #003366;
        }

        .player-hcp {
            color: #666;
            font-size: 0.9em;
        }

        .gender-male { border-left: 4px solid #4169E1; }
        .gender-female { border-left: 4px solid #FF69B4; }

        .edit-btn {
            background: #ffc107;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .edit-btn:hover {
            background: #ffb300;
            transform: scale(1.05);
        }

        .save-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .save-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .cancel-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            margin-top: 10px;
            margin-left: 10px;
        }

        .cancel-btn:hover {
            background: #5a6268;
        }

        .admin-controls {
            text-align: right;
            margin-bottom: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
        }

        .modal-content {
            background: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 10px;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal-content h3 {
            color: #003366;
            margin-bottom: 20px;
        }

        .modal-content input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .modal-content input:focus {
            outline: none;
            border-color: #003366;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .header p {
                font-size: 1em;
            }

            .tab {
                padding: 15px 10px;
                font-size: 14px;
                min-width: 110px;
            }

            .tab-content {
                padding: 20px 15px;
            }

            .points-input-large {
                font-size: 36px;
                padding: 15px;
            }

            .schedule-table, .leaderboard-table {
                font-size: 12px;
            }

            .schedule-table td, .schedule-table th,
            .leaderboard-table td, .leaderboard-table th {
                padding: 8px 5px;
            }

            .course-card {
                padding: 15px;
            }

            .group-card {
                padding: 15px;
            }

            .form-group select,
            .form-group input {
                font-size: 16px; /* Prevents zoom on iOS */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚õ≥ –ì–æ–ª—Ñ –¢—É—Ä–Ω–∏—Ä Antalya</h1>
            <p>28 –î–µ–∫–µ–º–≤—Ä–∏ 2025 - 2 –Ø–Ω—É–∞—Ä–∏ 2026</p>
            <p style="font-size: 1.1em; margin-top: 10px;">üèÜ Stableford Format | 4 –ò–≥—Ä–∏—â–∞ | 18 –ò–≥—Ä–∞—á–∏ (12 –º—ä–∂–µ, 6 –∂–µ–Ω–∏)</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('scorecard')">üìù –í—ä–≤–µ–¥–∏ –†–µ–∑—É–ª—Ç–∞—Ç</button>
            <button class="tab" onclick="showTab('leaderboard')">üèÜ –ö–ª–∞—Å–∏—Ä–∞–Ω–µ</button>
            <button class="tab" onclick="showTab('groups')">üë• –ì—Ä—É–ø–∏</button>
            <button class="tab" onclick="showTab('schedule')">üìÖ –†–∞–∑–ø–∏—Å–∞–Ω–∏–µ</button>
            <button class="tab" onclick="showTab('courses')">üèåÔ∏è –ò–≥—Ä–∏—â–∞</button>
        </div>

        <!-- –í—ä–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç -->
        <div id="scorecard" class="tab-content active">
            <h2 style="color: #003366; margin-bottom: 20px;">üìù –í—ä–≤–µ–¥–∏ –†–µ–∑—É–ª—Ç–∞—Ç</h2>
            
            <div class="form-group">
                <label>–ò–∑–±–µ—Ä–∏ –ò–≥—Ä–∞—á:</label>
                <select id="playerSelect" onchange="updatePlayerInfo()">
                    <option value="">-- –ò–∑–±–µ—Ä–∏ –∏–≥—Ä–∞—á --</option>
                </select>
            </div>

            <div class="form-group">
                <label>–ò–∑–±–µ—Ä–∏ –ò–≥—Ä–∏—â–µ:</label>
                <select id="courseSelect" onchange="updateCourseInfo()">
                    <option value="">-- –ò–∑–±–µ—Ä–∏ –∏–≥—Ä–∏—â–µ --</option>
                </select>
            </div>

            <div id="playerInfo" style="display: none;" class="info-box">
                <strong>–ò–≥—Ä–∞—á:</strong> <span id="infoPlayerName"></span><br>
                <strong>Handicap:</strong> <span id="infoPlayerHcp"></span><br>
                <strong>Playing Handicap:</strong> <span id="infoPlayingHcp"></span><br>
                <strong>–ò–≥—Ä–∏—â–µ:</strong> <span id="infoCourse"></span><br>
                <strong>–î–∞—Ç–∞:</strong> <span id="infoDate"></span>
            </div>

            <div id="pointsInput" style="display: none;">
                <div class="points-input-container">
                    <label style="font-size: 24px; color: #003366; margin-bottom: 15px; display: block;">
                        <strong>–í—ä–≤–µ–¥–∏ –æ–±—â–æ —Ç–æ—á–∫–∏ –æ—Ç —Ä—É–Ω–¥–∞:</strong>
                    </label>
                    <input type="number" 
                           id="totalPointsInput" 
                           class="points-input-large" 
                           min="0" 
                           max="72" 
                           placeholder="0">
                </div>

                <div style="text-align: center;">
                    <button class="btn" onclick="saveScore()">üíæ –ó–∞–ø–∞–∑–∏ –†–µ–∑—É–ª—Ç–∞—Ç</button>
                </div>
            </div>

            <div id="saveMessage"></div>
        </div>

        <!-- –ö–ª–∞—Å–∏—Ä–∞–Ω–µ -->
        <div id="leaderboard" class="tab-content">
            <h2 style="color: #003366; margin-bottom: 20px;">üèÜ –ö–ª–∞—Å–∏—Ä–∞–Ω–µ</h2>
            
            <div class="alert alert-info">
                <strong>‚ÑπÔ∏è –ö–ª–∞—Å–∏—Ä–∞–Ω–µ—Ç–æ —Å–µ –±—Ä–æ–∏ –ø–æ 4 –Ω–∞–π-–¥–æ–±—Ä–∏ –∏–≥—Ä–∏ –æ—Ç –æ–±—â–æ 6 —Ä—É–Ω–¥–∞</strong>
            </div>
            
            <div class="category-header">üë® –ú—ä–∂–µ</div>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>–ú—è—Å—Ç–æ</th>
                        <th>–ò–≥—Ä–∞—á</th>
                        <th>HCP</th>
                        <th style="background: #28a745;">–¢–æ–ø 1</th>
                        <th style="background: #28a745;">–¢–æ–ø 2</th>
                        <th style="background: #28a745;">–¢–æ–ø 3</th>
                        <th style="background: #28a745;">–¢–æ–ø 4</th>
                        <th style="background: #FFD700; color: #000;">–û–ë–©–û</th>
                    </tr>
                </thead>
                <tbody id="menLeaderboard"></tbody>
            </table>

            <div class="category-header">üë© –ñ–µ–Ω–∏</div>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>–ú—è—Å—Ç–æ</th>
                        <th>–ò–≥—Ä–∞—á</th>
                        <th>HCP</th>
                        <th style="background: #28a745;">–¢–æ–ø 1</th>
                        <th style="background: #28a745;">–¢–æ–ø 2</th>
                        <th style="background: #28a745;">–¢–æ–ø 3</th>
                        <th style="background: #28a745;">–¢–æ–ø 4</th>
                        <th style="background: #FFD700; color: #000;">–û–ë–©–û</th>
                    </tr>
                </thead>
                <tbody id="womenLeaderboard"></tbody>
            </table>
        </div>

        <!-- –ì—Ä—É–ø–∏ -->
        <div id="groups" class="tab-content">
            <h2 style="color: #003366; margin-bottom: 20px;">üë• –ì—Ä—É–ø–∏</h2>
            
            <div class="admin-controls">
                <button class="edit-btn" onclick="showPasswordModal()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π –ì—Ä—É–ø–∏</button>
            </div>

            <div class="alert alert-info">
                <strong>‚ÑπÔ∏è –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</strong> –ì—Ä—É–ø–∏—Ç–µ —Å–∞ –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–∏ –ø–æ –∂—Ä–µ–±–∏–π –∑–∞ –≤—Å—è–∫–∞ –∏–≥—Ä–∞. –í—Å—è–∫–∞ –≥—Ä—É–ø–∞ –∏–º–∞ —Ç–æ—á–Ω–æ 4 –∏–≥—Ä–∞—á–∏ (16 –∏–≥—Ä–∞—á–∏ –æ–±—â–æ).
            </div>

            <div id="groupsContainer"></div>
            <div id="editMessage"></div>
        </div>

        <!-- –†–∞–∑–ø–∏—Å–∞–Ω–∏–µ -->
        <div id="schedule" class="tab-content">
            <h2 style="color: #003366; margin-bottom: 20px;">üìÖ –†–∞–∑–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –¢—É—Ä–Ω–∏—Ä–∞</h2>
            
            <div class="alert alert-info">
                <strong>‚ÑπÔ∏è –ó–∞–±–µ–ª–µ–∂–∫–∞:</strong> –ü–æ—Å–æ—á–µ–Ω–∏—Ç–µ —á–∞—Å–æ–≤–µ —Å–∞ –∑–∞ –ø—ä—Ä–≤–∞—Ç–∞ –≥—Ä—É–ø–∞. –û—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –≥—Ä—É–ø–∏ —Ç—Ä—ä–≥–≤–∞—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç 8-10 –º–∏–Ω—É—Ç–∏.
            </div>
            
            <table class="schedule-table">
                <thead>
                    <tr>
                        <th>–î–µ–Ω</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–î–µ–Ω –æ—Ç —Å–µ–¥–º–∏—Ü–∞—Ç–∞</th>
                        <th>–ò–≥—Ä–∏—â–µ</th>
                        <th>–ù–∞—á–∞–ª–µ–Ω —á–∞—Å</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="day-badge">–î–µ–Ω 1</span></td>
                        <td><strong>28.12.2025</strong></td>
                        <td>–ù–µ–¥–µ–ª—è</td>
                        <td>National Golf Club</td>
                        <td>11:18 - 11:45</td>
                    </tr>
                    <tr>
                        <td><span class="day-badge">–î–µ–Ω 2</span></td>
                        <td><strong>29.12.2025</strong></td>
                        <td>–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫</td>
                        <td>Carya Golf Club</td>
                        <td>09:36 - 10:03</td>
                    </tr>
                    <tr>
                        <td><span class="day-badge">–î–µ–Ω 3</span></td>
                        <td><strong>30.12.2025</strong></td>
                        <td>–í—Ç–æ—Ä–Ω–∏–∫</td>
                        <td>National Golf Club</td>
                        <td>10:33 - 11:00</td>
                    </tr>
                    <tr>
                        <td><span class="day-badge">–î–µ–Ω 4</span></td>
                        <td><strong>31.12.2025</strong></td>
                        <td>–°—Ä—è–¥–∞</td>
                        <td>Carya Golf Club</td>
                        <td>10:03 - 10:30</td>
                    </tr>
                    <tr>
                        <td><span class="day-badge">–î–µ–Ω 5</span></td>
                        <td><strong>01.01.2026</strong></td>
                        <td>–ß–µ—Ç–≤—ä—Ä—Ç—ä–∫</td>
                        <td>Gloria Old</td>
                        <td>11:57 - 12:24</td>
                    </tr>
                    <tr>
                        <td><span class="day-badge">–î–µ–Ω 6</span></td>
                        <td><strong>02.01.2026</strong></td>
                        <td>–ü–µ—Ç—ä–∫</td>
                        <td>Sultan</td>
                        <td>12:30 - 13:00</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- –ò–≥—Ä–∏—â–∞ -->
        <div id="courses" class="tab-content">
            <h2 style="color: #003366; margin-bottom: 20px;">üèåÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ò–≥—Ä–∏—â–∞—Ç–∞</h2>

            <div class="course-card">
                <h3>‚õ≥ National Golf Club</h3>
                <p><strong>–õ–æ–∫–∞—Ü–∏—è:</strong> Belek, Antalya, Turkey</p>
                <p><strong>–î–∏–∑–∞–π–Ω–µ—Ä:</strong> David Feherty & David Jones | <strong>–û—Ç–∫—Ä–∏—Ç–æ:</strong> 1994</p>
                
                <div class="course-info">
                    <div class="course-info-item">
                        <strong>Par:</strong> 72
                    </div>
                    <div class="course-info-item">
                        <strong>Course Rating (Men):</strong> 73.4
                    </div>
                    <div class="course-info-item">
                        <strong>Slope (Men):</strong> 143
                    </div>
                    <div class="course-info-item">
                        <strong>Course Rating (Women):</strong> 71.7
                    </div>
                    <div class="course-info-item">
                        <strong>Slope (Women):</strong> 132
                    </div>
                </div>
                
                <p style="margin-top: 15px; line-height: 1.6;">
                    –ö—Ä–∞—Å–∏–≤–æ –∏–≥—Ä–∏—â–µ —Å –µ–≤–∫–∞–ª–∏–ø—Ç–æ–≤–∏ –∏ –±–æ—Ä–æ–≤–∏ –¥—ä—Ä–≤–µ—Ç–∞, 10 –µ–∑–µ—Ä–∞ –∏ 64 –±—É–Ω–∫–µ—Ä–∞. 
                    –í–ø–µ—á–∞—Ç–ª—è–≤–∞—â–∞ –≥–ª–µ–¥–∫–∞ –∫—ä–º –ø–ª–∞–Ω–∏–Ω–∏—Ç–µ –¢–∞—É—Ä—É—Å.
                </p>
            </div>

            <div class="course-card">
                <h3>‚õ≥ Carya Golf Club</h3>
                <p><strong>–õ–æ–∫–∞—Ü–∏—è:</strong> Belek, Antalya, Turkey</p>
                <p><strong>–î–∏–∑–∞–π–Ω–µ—Ä:</strong> Thomson Perrett & Lobb | <strong>–û—Ç–∫—Ä–∏—Ç–æ:</strong> 2008</p>
                
                <div class="course-info">
                    <div class="course-info-item">
                        <strong>Par:</strong> 72
                    </div>
                    <div class="course-info-item">
                        <strong>Course Rating (Men):</strong> 72.3
                    </div>
                    <div class="course-info-item">
                        <strong>Slope (Men):</strong> 135
                    </div>
                    <div class="course-info-item">
                        <strong>Course Rating (Women):</strong> 71.0
                    </div>
                    <div class="course-info-item">
                        <strong>Slope (Women):</strong> 130
                    </div>
                </div>
                
                <p style="margin-top: 15px; line-height: 1.6;">
                    –ü—ä—Ä–≤–æ—Ç–æ heathland-style –∏–≥—Ä–∏—â–µ –≤ –¢—É—Ä—Ü–∏—è. –û—Å–≤–µ—Ç–µ–Ω–æ –∑–∞ –Ω–æ—â–Ω–∞ –∏–≥—Ä–∞. 
                    –ù–∞–π-–¥—ä–ª–≥–∞—Ç–∞ –¥—É–ø–∫–∞ –≤ –¢—É—Ä—Ü–∏—è - 621 yards (–¥—É–ø–∫–∞ 6).
                </p>
            </div>

            <div class="course-card">
                <h3>‚õ≥ Gloria Old Course</h3>
                <p><strong>–õ–æ–∫–∞—Ü–∏—è:</strong> Belek, Antalya, Turkey</p>
                <p><strong>–î–∏–∑–∞–π–Ω–µ—Ä:</strong> Michel Gayon | <strong>–û—Ç–∫—Ä–∏—Ç–æ:</strong> 1997</p>
                
                <div class="course-info">
                    <div class="course-info-item">
                        <strong>Par:</strong> 72
                    </div>
                    <div class="course-info-item">
                        <strong>Course Rating (Men):</strong> 74.0
                    </div>
                    <div class="course-info-item">
                        <strong>Slope (Men):</strong> 139
                    </div>
                    <div class="course-info-item">
                        <strong>Course Rating (Women):</strong> 71.4
                    </div>
                    <div class="course-info-item">
                        <strong>Slope (Women):</strong> 139
                    </div>
                </div>
                
                <p style="margin-top: 15px; line-height: 1.6;">
                    –î–æ–º–∞–∫–∏–Ω –Ω–∞ European Seniors Tour (1998, 2000, 2001). 
                    7 –µ–∑–µ—Ä–∞ –∏ 63 –±—É–Ω–∫–µ—Ä–∞. –¢–µ—Å–Ω–∏ fairways —Å—Ä–µ–¥ –±–æ—Ä–æ–≤–∞ –≥–æ—Ä–∞.
                </p>
            </div>

            <div class="course-card">
                <h3>‚õ≥ Sultan Course (Antalya Golf Club)</h3>
                <p><strong>–õ–æ–∫–∞—Ü–∏—è:</strong> Belek, Antalya, Turkey</p>
                <p><strong>–î–∏–∑–∞–π–Ω–µ—Ä:</strong> European Golf Design & David Jones | <strong>–û—Ç–∫—Ä–∏—Ç–æ:</strong> 2003</p>
                
                <div class="course-info">
                    <div class="course-info-item">
                        <strong>Par:</strong> 71
                    </div>
                    <div class="course-info-item">
                        <strong>Course Rating:</strong> 73.9
                    </div>
                    <div class="course-info-item">
                        <strong>Slope:</strong> 142
                    </div>
                </div>
                
                <p style="margin-top: 15px; line-height: 1.6;">
                    –ü–æ-–¥—ä–ª–≥–æ –∏ –≤–∑–∏—Å–∫–∞—Ç–µ–ª–Ω–æ –∏–≥—Ä–∏—â–µ. –í–æ–¥–∞ –Ω–∞ 11 –¥—É–ø–∫–∏. 
                    –ë–ª–∏–∑–æ 100 –±—É–Ω–∫–µ—Ä–∞ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–≤–∞—Ç –¥–æ—Ä–∏ –æ–ø–∏—Ç–Ω–∏—Ç–µ –∏–≥—Ä–∞—á–∏.
                </p>
            </div>
        </div>
    </div>

    <!-- Password Modal -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <h3>üîí –í—ä–≤–µ–¥–∏ –ø–∞—Ä–æ–ª–∞ –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ</h3>
            <input type="password" id="adminPassword" placeholder="–ü–∞—Ä–æ–ª–∞">
            <button class="save-btn" onclick="checkPassword()">–í–ª–µ–∑</button>
            <button class="cancel-btn" onclick="closePasswordModal()">–û—Ç–∫–∞–∑</button>
            <div id="passwordError"></div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCvmWe-SF0PrHjxGbpP0R11eEot1fRwZLs",
            authDomain: "golf-tournament-antalya.firebaseapp.com",
            databaseURL: "https://golf-tournament-antalya-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "golf-tournament-antalya",
            storageBucket: "golf-tournament-antalya.firebasestorage.app",
            messagingSenderId: "672955257432",
            appId: "1:672955257432:web:29104c0908114538f9702d"
        };

        // Initialize Firebase
        let database;
        let isFirebaseReady = false;

        // Wait for Firebase modules to load
        function initFirebase() {
            if (window.firebaseApp && window.getDatabase) {
                try {
                    const app = window.firebaseApp(firebaseConfig);
                    database = window.getDatabase(app);
                    isFirebaseReady = true;
                    console.log("Firebase connected successfully");
                    
                    // Load data after Firebase is ready
                    loadLeaderboard();
                    setupRealtimeListener();
                    loadGroups();
                } catch (error) {
                    console.error("Firebase initialization error:", error);
                    alert("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ –∫—ä–º –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏. –ú–æ–ª—è –ø—Ä–µ–∑–∞—Ä–µ–¥–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞.");
                }
            } else {
                // Retry after 100ms
                setTimeout(initFirebase, 100);
            }
        }

        // Start initialization
        setTimeout(initFirebase, 100);

        // –ü–∞—Ä–æ–ª–∞ –∑–∞ –∞–¥–º–∏–Ω
        const ADMIN_PASSWORD = "golf2025";

        // –î–∞–Ω–Ω–∏ –∑–∞ –∏–≥—Ä–∞—á–∏ (–¥–æ–±–∞–≤–µ–Ω–∏ Rumen –∏ Vanq Manevski)
        const players = {
            "Petq Ilieva": { hcp: 19.4, gender: "F" },
            "Elka Georgieva": { hcp: 21.4, gender: "F" },
            "Pepi Kostova": { hcp: 31.3, gender: "F" },
            "Albena Deneva": { hcp: 19.7, gender: "F" },
            "Stoyanka Tsoneva": { hcp: 27.8, gender: "F" },
            "Fani Martinova": { hcp: 40.3, gender: "F" },
            "Biser Denev": { hcp: 10.7, gender: "M" },
            "Ilian Iliev": { hcp: 14.0, gender: "M" },
            "Todor Kostov": { hcp: 9.2, gender: "M" },
            "Anton Panayotov": { hcp: 8.8, gender: "M" },
            "Zlatan Zlatanov": { hcp: 26.8, gender: "M" },
            "Hristo Bojikov": { hcp: 24.3, gender: "M" },
            "Krasimir Martinov": { hcp: 25.9, gender: "M" },
            "Dido Gospodinov": { hcp: 10.8, gender: "M" },
            "Trifon Siderov": { hcp: 11.2, gender: "M" },
            "Niki Georgiev": { hcp: 16.2, gender: "M" },
            "Rumen Manevski": { hcp: 19.9, gender: "M" },
            "Vanq Manevski": { hcp: 20.6, gender: "F" }
        };

        // –ò–≥—Ä–∞—á–∏ —É—á–∞—Å—Ç–≤–∞—â–∏ –≤ —Ç—É—Ä–Ω–∏—Ä–∞ (–±–µ–∑ Rumen –∏ Vanq)
        const tournamentPlayers = [
            "Anton Panayotov",
            "Todor Kostov", 
            "Biser Denev",
            "Dido Gospodinov",
            "Trifon Siderov",
            "Ilian Iliev",
            "Niki Georgiev",
            "Hristo Bojikov",
            "Krasimir Martinov",
            "Zlatan Zlatanov",
            "Petq Ilieva",
            "Elka Georgieva",
            "Pepi Kostova",
            "Albena Deneva",
            "Stoyanka Tsoneva",
            "Fani Martinova"
        ];

        // –î–∞–Ω–Ω–∏ –∑–∞ –∏–≥—Ä–∏—â–∞
        const courses = [
            {
                id: "national_28dec",
                name: "National Golf Club",
                date: "28.12.2025",
                par: 72,
                M: { rating: 73.4, slope: 143 },
                F: { rating: 71.7, slope: 132 }
            },
            {
                id: "carya_29dec",
                name: "Carya Golf Club",
                date: "29.12.2025",
                par: 72,
                M: { rating: 72.3, slope: 135 },
                F: { rating: 71.0, slope: 130 }
            },
            {
                id: "national_30dec",
                name: "National Golf Club",
                date: "30.12.2025",
                par: 72,
                M: { rating: 73.4, slope: 143 },
                F: { rating: 71.7, slope: 132 }
            },
            {
                id: "carya_31dec",
                name: "Carya Golf Club",
                date: "31.12.2025",
                par: 72,
                M: { rating: 72.3, slope: 135 },
                F: { rating: 71.0, slope: 130 }
            },
            {
                id: "gloria_01jan",
                name: "Gloria Old",
                date: "01.01.2026",
                par: 72,
                M: { rating: 74.0, slope: 139 },
                F: { rating: 71.4, slope: 139 }
            },
            {
                id: "sultan_02jan",
                name: "Sultan",
                date: "02.01.2026",
                par: 71,
                M: { rating: 73.9, slope: 142 },
                F: { rating: 73.9, slope: 142 }
            }
        ];

        // –ù–∞—á–∞–ª–Ω–∏ –≥—Ä—É–ø–∏ (—â–µ —Å–µ –∑–∞—Ä–µ–∂–¥–∞—Ç –æ—Ç Firebase) - 4 –≥—Ä—É–ø–∏ –ø–æ 4 –∏–≥—Ä–∞—á–∏
        let defaultGroups = [
            ["Anton Panayotov", "Todor Kostov", "Biser Denev", "Dido Gospodinov"],
            ["Trifon Siderov", "Ilian Iliev", "Niki Georgiev", "Petq Ilieva"],
            ["Albena Deneva", "Elka Georgieva", "Hristo Bojikov", "Krasimir Martinov"],
            ["Zlatan Zlatanov", "Stoyanka Tsoneva", "Pepi Kostova", "Fani Martinova"]
        ];

        let currentPlayer = null;
        let currentCourse = null;
        let currentPlayingHcp = 0;
        let isEditMode = false;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            populatePlayerSelects();
            populateCourseSelect();
            displayGroups(); // Show default groups immediately
            // Firebase functions will be called after Firebase is ready
        }

        function populatePlayerSelects() {
            const playerSelect = document.getElementById('playerSelect');
            
            Object.keys(players).sort().forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                playerSelect.appendChild(option);
            });
        }

        function populateCourseSelect() {
            const courseSelect = document.getElementById('courseSelect');
            
            courses.forEach((course, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${course.name} - ${course.date}`;
                courseSelect.appendChild(option);
            });
        }

        function calculatePlayingHcp(courseHcp, slope) {
            return Math.round(courseHcp * (slope / 113.0));
        }

        function updatePlayerInfo() {
            const playerName = document.getElementById('playerSelect').value;
            if (!playerName) {
                document.getElementById('playerInfo').style.display = 'none';
                document.getElementById('pointsInput').style.display = 'none';
                return;
            }

            currentPlayer = playerName;
            updateCourseInfo();
        }

        function updateCourseInfo() {
            const courseIndex = document.getElementById('courseSelect').value;
            const playerName = document.getElementById('playerSelect').value;

            if (!courseIndex || !playerName) {
                document.getElementById('playerInfo').style.display = 'none';
                document.getElementById('pointsInput').style.display = 'none';
                return;
            }

            currentCourse = courses[courseIndex];
            const player = players[playerName];
            const slope = currentCourse[player.gender].slope;
            currentPlayingHcp = calculatePlayingHcp(player.hcp, slope);

            document.getElementById('infoPlayerName').textContent = playerName;
            document.getElementById('infoPlayerHcp').textContent = player.hcp.toFixed(1);
            document.getElementById('infoPlayingHcp').textContent = currentPlayingHcp;
            document.getElementById('infoCourse').textContent = currentCourse.name;
            document.getElementById('infoDate').textContent = currentCourse.date;

            document.getElementById('playerInfo').style.display = 'block';
            document.getElementById('pointsInput').style.display = 'block';
            document.getElementById('totalPointsInput').value = '';
            document.getElementById('totalPointsInput').focus();
        }

        function saveScore() {
            const playerName = document.getElementById('playerSelect').value;
            const courseIndex = document.getElementById('courseSelect').value;
            const totalPointsInput = document.getElementById('totalPointsInput').value;

            if (!playerName || courseIndex === '') {
                alert('–ú–æ–ª—è, –∏–∑–±–µ—Ä–µ—Ç–µ –∏–≥—Ä–∞—á –∏ –∏–≥—Ä–∏—â–µ!');
                return;
            }

            if (totalPointsInput === '' || totalPointsInput === null) {
                alert('–ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ –±—Ä–æ–π —Ç–æ—á–∫–∏!');
                return;
            }

            const totalPoints = parseInt(totalPointsInput);

            if (isNaN(totalPoints) || totalPoints < 0 || totalPoints > 72) {
                alert('–ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ –≤–∞–ª–∏–¥–µ–Ω –±—Ä–æ–π —Ç–æ—á–∫–∏ (0-72)!');
                return;
            }

            if (!isFirebaseReady) {
                alert('–ú–æ–ª—è –∏–∑—á–∞–∫–∞–π—Ç–µ, –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Å–µ –∑–∞—Ä–µ–∂–¥–∞...');
                return;
            }

            const course = courses[courseIndex];

            const scoreData = {
                player: playerName,
                courseId: course.id,
                courseName: course.name,
                date: course.date,
                playingHcp: currentPlayingHcp,
                totalPoints: totalPoints,
                timestamp: new Date().toISOString()
            };

            try {
                const key = `${playerName.replace(/\s+/g, '_')}_${course.id}`;
                const scoreRef = window.dbRef(database, 'scores/' + key);
                
                // Save to Firebase
                window.dbSet(scoreRef, scoreData)
                    .then(() => {
                        document.getElementById('saveMessage').innerHTML = `
                            <div class="alert alert-success">
                                ‚úÖ –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –µ –∑–∞–ø–∏—Å–∞–Ω —É—Å–ø–µ—à–Ω–æ!<br>
                                –ò–≥—Ä–∞—á: ${playerName}<br>
                                –ò–≥—Ä–∏—â–µ: ${course.name}<br>
                                –û–±—â–æ —Ç–æ—á–∫–∏: ${totalPoints}
                            </div>
                        `;

                        setTimeout(() => {
                            document.getElementById('saveMessage').innerHTML = '';
                            document.getElementById('totalPointsInput').value = '';
                        }, 3000);
                    })
                    .catch((error) => {
                        alert('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ: ' + error.message);
                    });

            } catch (error) {
                alert('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ: ' + error.message);
            }
        }

        function loadLeaderboard() {
            if (!isFirebaseReady) {
                return;
            }

            try {
                const scoresRef = window.dbRef(database, 'scores');
                window.dbGet(scoresRef)
                    .then((snapshot) => {
                        const scores = {};
                        const data = snapshot.val();

                        if (data) {
                            Object.values(data).forEach(scoreData => {
                                if (!scores[scoreData.player]) {
                                    scores[scoreData.player] = {
                                        player: scoreData.player,
                                        gender: players[scoreData.player].gender,
                                        hcp: players[scoreData.player].hcp,
                                        rounds: {}
                                    };
                                }
                                
                                scores[scoreData.player].rounds[scoreData.courseId] = scoreData.totalPoints;
                            });
                        }

                        displayLeaderboard(scores);
                    })
                    .catch((error) => {
                        console.error('Error loading leaderboard:', error);
                    });
            } catch (error) {
                console.error('Error loading leaderboard:', error);
            }
        }

        // Real-time listener for automatic updates
        function setupRealtimeListener() {
            if (!isFirebaseReady) {
                return;
            }

            const scoresRef = window.dbRef(database, 'scores');
            window.dbOnValue(scoresRef, (snapshot) => {
                const scores = {};
                const data = snapshot.val();

                if (data) {
                    Object.values(data).forEach(scoreData => {
                        if (!scores[scoreData.player]) {
                            scores[scoreData.player] = {
                                player: scoreData.player,
                                gender: players[scoreData.player].gender,
                                hcp: players[scoreData.player].hcp,
                                rounds: {}
                            };
                        }
                        
                        scores[scoreData.player].rounds[scoreData.courseId] = scoreData.totalPoints;
                    });
                }

                displayLeaderboard(scores);
            });
        }

        function displayLeaderboard(scores) {
            const men = [];
            const women = [];

            Object.values(scores).forEach(player => {
                const roundScores = courses.map(c => player.rounds[c.id] || null);
                const validScores = roundScores.filter(s => s !== null);
                
                // –í–∑–µ–º–∞–º–µ 4-—Ç–µ –Ω–∞–π-–¥–æ–±—Ä–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞
                const sortedScores = [...validScores].sort((a, b) => b - a);
                const top4Scores = sortedScores.slice(0, 4);
                
                // –î–æ–ø—ä–ª–≤–∞–º–µ —Å —Ç–∏—Ä–µ—Ç–∞ –∞–∫–æ —Å–∞ –ø–æ-–º–∞–ª–∫–æ –æ—Ç 4
                while (top4Scores.length < 4) {
                    top4Scores.push('-');
                }
                
                const total = sortedScores.slice(0, 4).filter(s => typeof s === 'number').reduce((a, b) => a + b, 0);
                
                const playerData = {
                    ...player,
                    total: total,
                    top4Scores: top4Scores,
                    playedRounds: validScores.length
                };

                if (player.gender === 'M') men.push(playerData);
                else women.push(playerData);
            });

            men.sort((a, b) => b.total - a.total);
            women.sort((a, b) => b.total - a.total);

            displayCategoryLeaderboard('menLeaderboard', men);
            displayCategoryLeaderboard('womenLeaderboard', women);
        }

        function displayCategoryLeaderboard(tableId, players) {
            const tbody = document.getElementById(tableId);
            tbody.innerHTML = '';

            if (players.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 20px;">–í—Å–µ –æ—â–µ –Ω—è–º–∞ –∑–∞–ø–∏—Å–∞–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏</td></tr>';
                return;
            }

            players.forEach((player, index) => {
                const row = document.createElement('tr');
                if (index === 0) row.classList.add('rank-1');
                else if (index === 1) row.classList.add('rank-2');
                else if (index === 2) row.classList.add('rank-3');

                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${player.player}</td>
                    <td>${player.hcp.toFixed(1)}</td>
                    ${player.top4Scores.map(s => `<td style="background: #e8f5e9;">${s}</td>`).join('')}
                    <td style="background: #fffacd;"><strong>${player.total}</strong></td>
                `;

                tbody.appendChild(row);
            });
        }

        // –ì–†–£–ü–ò
        function loadGroups() {
            if (!isFirebaseReady) {
                displayGroups();
                return;
            }

            try {
                const groupsRef = window.dbRef(database, 'groups');
                window.dbGet(groupsRef)
                    .then((snapshot) => {
                        const saved = snapshot.val();
                        if (saved && Array.isArray(saved)) {
                            defaultGroups = saved;
                        }
                        displayGroups();
                    })
                    .catch((error) => {
                        displayGroups();
                    });
            } catch (e) {
                displayGroups();
            }
        }

        function displayGroups() {
            const container = document.getElementById('groupsContainer');
            container.innerHTML = '';

            defaultGroups.forEach((group, groupIndex) => {
                const card = document.createElement('div');
                card.className = 'group-card';

                let membersHtml = '<ul class="group-members">';
                group.forEach((playerName, playerIndex) => {
                    const player = players[playerName];
                    const genderClass = player.gender === 'M' ? 'gender-male' : 'gender-female';
                    
                    if (isEditMode) {
                        // Create dropdown with all tournament players
                        let dropdownOptions = '<option value="">-- –ò–∑–±–µ—Ä–∏ –∏–≥—Ä–∞—á --</option>';
                        tournamentPlayers.forEach(name => {
                            const selected = name === playerName ? 'selected' : '';
                            dropdownOptions += `<option value="${name}" ${selected}>${name}</option>`;
                        });
                        
                        membersHtml += `
                            <li class="${genderClass}" id="player-${groupIndex}-${playerIndex}">
                                <select class="player-dropdown" 
                                        data-group="${groupIndex}" 
                                        data-player="${playerIndex}"
                                        onchange="updatePlayerHcp(${groupIndex}, ${playerIndex})"
                                        style="width: 250px; padding: 8px; border: 2px solid #003366; border-radius: 5px; font-size: 14px;">
                                    ${dropdownOptions}
                                </select>
                                <span class="player-hcp" id="hcp-${groupIndex}-${playerIndex}">HCP: ${player.hcp.toFixed(1)}</span>
                            </li>
                        `;
                    } else {
                        membersHtml += `
                            <li class="${genderClass}">
                                <span class="player-name">${playerName}</span>
                                <span class="player-hcp">HCP: ${player.hcp.toFixed(1)}</span>
                            </li>
                        `;
                    }
                });
                membersHtml += '</ul>';

                card.innerHTML = `
                    <h3>–ì—Ä—É–ø–∞ ${groupIndex + 1}</h3>
                    ${membersHtml}
                `;

                container.appendChild(card);
            });

            if (isEditMode) {
                container.innerHTML += `
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="save-btn" onclick="saveGroups()">üíæ –ó–∞–ø–∞–∑–∏ –ü—Ä–æ–º–µ–Ω–∏—Ç–µ</button>
                        <button class="cancel-btn" onclick="cancelEdit()">‚ùå –û—Ç–∫–∞–∑</button>
                    </div>
                `;
            }
        }

        function updatePlayerHcp(groupIndex, playerIndex) {
            const dropdown = document.querySelector(`select[data-group="${groupIndex}"][data-player="${playerIndex}"]`);
            const playerName = dropdown.value;
            const hcpSpan = document.getElementById(`hcp-${groupIndex}-${playerIndex}`);
            const listItem = document.getElementById(`player-${groupIndex}-${playerIndex}`);
            
            if (playerName && players[playerName]) {
                const player = players[playerName];
                hcpSpan.textContent = `HCP: ${player.hcp.toFixed(1)}`;
                
                // Update gender class
                listItem.classList.remove('gender-male', 'gender-female');
                listItem.classList.add(player.gender === 'M' ? 'gender-male' : 'gender-female');
            } else {
                hcpSpan.textContent = 'HCP: -';
            }
        }

        function showPasswordModal() {
            document.getElementById('passwordModal').style.display = 'block';
            document.getElementById('adminPassword').value = '';
            document.getElementById('passwordError').innerHTML = '';
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').style.display = 'none';
        }

        function checkPassword() {
            const password = document.getElementById('adminPassword').value;
            
            if (password === ADMIN_PASSWORD) {
                closePasswordModal();
                isEditMode = true;
                displayGroups();
            } else {
                document.getElementById('passwordError').innerHTML = `
                    <div class="alert alert-error" style="margin-top: 15px;">
                        ‚ùå –ì—Ä–µ—à–Ω–∞ –ø–∞—Ä–æ–ª–∞!
                    </div>
                `;
            }
        }

        function saveGroups() {
            const newGroups = [[], [], [], []];
            
            // –°—ä–±–∏—Ä–∞–Ω–µ –Ω–∞ –Ω–æ–≤–∏—Ç–µ –∏–º–µ–Ω–∞ –æ—Ç dropdown –º–µ–Ω—é—Ç–∞—Ç–∞
            const dropdowns = document.querySelectorAll('.player-dropdown');
            dropdowns.forEach(dropdown => {
                const groupIndex = parseInt(dropdown.dataset.group);
                const playerName = dropdown.value.trim();
                
                if (playerName && players[playerName]) {
                    newGroups[groupIndex].push(playerName);
                }
            });

            // –í–∞–ª–∏–¥–∞—Ü–∏—è - –≤—Å—è–∫–∞ –≥—Ä—É–ø–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ —Ç–æ—á–Ω–æ 4 –∏–≥—Ä–∞—á–∏
            for (let i = 0; i < 4; i++) {
                if (newGroups[i].length !== 4) {
                    alert(`–ì—Ä—É–ø–∞ ${i + 1} —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ —Ç–æ—á–Ω–æ 4 –∏–≥—Ä–∞—á–∏! –ú–æ–ª—è –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –≤—Å–∏—á–∫–∏ –ø–æ–∑–∏—Ü–∏–∏.`);
                    return;
                }
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –∏–º–µ–Ω–∞
            const allNames = newGroups.flat();
            const uniqueNames = new Set(allNames);
            if (uniqueNames.size !== allNames.length) {
                alert('–ò–º–∞ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –∏–º–µ–Ω–∞ –Ω–∞ –∏–≥—Ä–∞—á–∏! –í—Å–µ–∫–∏ –∏–≥—Ä–∞—á –º–æ–∂–µ –¥–∞ –±—ä–¥–µ —Å–∞–º–æ –≤ –µ–¥–Ω–∞ –≥—Ä—É–ø–∞.');
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –≤—Å–∏—á–∫–∏ 16 –∏–≥—Ä–∞—á–∏ —Å–∞ –≤–∫–ª—é—á–µ–Ω–∏
            if (allNames.length !== 16) {
                alert('–í—Å–∏—á–∫–∏ 16 –∏–≥—Ä–∞—á–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–∞—Ç —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ –≤ –≥—Ä—É–ø–∏—Ç–µ!');
                return;
            }

            if (!isFirebaseReady) {
                alert('–ú–æ–ª—è –∏–∑—á–∞–∫–∞–π—Ç–µ, –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Å–µ –∑–∞—Ä–µ–∂–¥–∞...');
                return;
            }

            // –ó–∞–ø–∞–∑–≤–∞–Ω–µ –≤ Firebase
            try {
                const groupsRef = window.dbRef(database, 'groups');
                window.dbSet(groupsRef, newGroups)
                    .then(() => {
                        defaultGroups = newGroups;
                        isEditMode = false;
                        displayGroups();

                        document.getElementById('editMessage').innerHTML = `
                            <div class="alert alert-success">
                                ‚úÖ –ì—Ä—É–ø–∏—Ç–µ —Å–∞ –∑–∞–ø–∞–∑–µ–Ω–∏ —É—Å–ø–µ—à–Ω–æ!
                            </div>
                        `;

                        setTimeout(() => {
                            document.getElementById('editMessage').innerHTML = '';
                        }, 3000);
                    })
                    .catch((error) => {
                        alert('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ: ' + error.message);
                    });
            } catch (error) {
                alert('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ: ' + error.message);
            }
        }

        function cancelEdit() {
            isEditMode = false;
            displayGroups();
        }

        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            if (tabName === 'leaderboard') {
                loadLeaderboard();
            } else if (tabName === 'groups') {
                loadGroups();
                displayGroups();
            }
        }

        // –ó–∞—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ modal –ø—Ä–∏ –∫–ª–∏–∫ –∏–∑–≤—ä–Ω –Ω–µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('passwordModal');
            if (event.target == modal) {
                closePasswordModal();
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ
        window.addEventListener('load', init);
    </script>
</body>
</html>
